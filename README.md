# コンテンツ販売手取り額計算WEBアプリ要件定義書

## 1. プロジェクト概要

### 1.1 目的
各コンテンツ販売サイトの手数料体系を基に、販売価格から実際の手取り額を一括計算し、結果を画像として保存できるWEBアプリケーションを開発する。

### 1.2 対象プラットフォーム
- note（有料記事のみ）
- tips
- Brain
- ココナラコンテンツマーケット

### 1.3 技術スタック
- フロントエンド: HTML/CSS/JavaScript
- 画像生成: Canvas API
- レスポンシブ対応: 必須（スマートフォン対応）

## 2. 機能要件

### 2.1 基本機能
#### 2.1.1 販売価格入力
- 数値入力フィールド
- 入力制限: 数値のみ（金額の上下限なし）
- セキュリティ: 無効な入力値での計算実行を防止

#### 2.1.2 手取り額計算
- 各プラットフォームの標準手数料を使用した自動計算
- 全プラットフォームの結果を並列で一覧表示

#### 2.1.3 画像保存機能
- 計算結果を16:9の横長画像（JPEG形式）で保存
- Canvas APIを使用した画像生成
- 計算結果の下に保存ボタンを配置

### 2.2 各プラットフォーム手数料設定

#### 2.2.1 note（有料記事のみ）
**事務手数料（決済手段別）:**
- クレジットカード決済: 5%
- 携帯キャリア決済: 15%
- PayPay決済: 7%
- Amazon Pay決済: 7%
- noteポイント決済: 10%
- PayPal決済: 6.5%

**プラットフォーム利用料:**
- 有料記事: 10%
- ※売上金額から事務手数料を引いた金額に適用

**振込手数料:**
- 270円（1回あたり）

#### 2.2.2 tips
**コンテンツ販売手数料:**
- 14%（販売価格に対して）

**振込手数料:**
- 通常会員: 550円（税込）
- プラス会員: 330円（税込）

#### 2.2.3 Brain
**コンテンツ販売手数料:**
- 12%（販売価格に対して）

**出金手数料:**
- 250円（税抜）= 275円（税込）

#### 2.2.4 ココナラコンテンツマーケット
**販売手数料:**
- 22%（税込）= 20% + 消費税10%

**振込手数料:**
- 売上金額3,000円未満: 160円
- 売上金額3,000円以上: 無料

## 3. UI/UX要件

### 3.1 表示形式
- 各サービスの計算結果を並列で一覧表示
- 手取り額を最も強調して表示
- 振込手数料は別途表示

### 3.2 画像保存機能仕様
#### 3.2.1 画像仕様
- 形式: JPEG
- アスペクト比: 16:9
- レイアウト: 横長（左側にnote各決済方法、右側に他3サービス）

#### 3.2.2 デザイン仕様
- メインカラー: #00c79e
- フォント: Noto Sans JP
- 見出し: 各プラットフォーム名 + 手取り額
- 含める情報: 販売価格、各手数料の内訳、手取り額

#### 3.2.3 レイアウト構成
```
[タイトル: XX,XXX円（税抜き）で販売した際の手取り額]

左側カラム:                    右側カラム:
note: ○○円～○○円              tips: ○円
・プラットフォーム利用料: -○円    ・コンテンツ販売料: -○円
・振込手数料(1回あたり): -270円   ・振込手数料(1回あたり):
                                  ○通常会員: 550円
・クレジットカード決済 -○円: ○円    ○プラス会員: 330円
・携帯キャリア決済 -○円: ○円
・PayPay決済 -○円: ○円         Brain: ○円
・Amazon Pay決済 -○円: ○円      ・コンテンツ販売料: -○円
・noteポイント決済 -○円: ○円     ・振込手数料(1回あたり): -275円
・PayPal決済 -○円: ○円
                              ココナラコンテンツマーケット: ○円
                              ・コンテンツ販売料: -○円
                              ・振込手数料(1回あたり):
                                ○売上金額3,000円未満: 160円
                                ○売上金額3,000円以上: 無料
```

### 3.3 フロントエンド表示仕様
#### 3.3.1 画面レイアウト
- 画像保存時と同様の16:9横長レイアウトをWEB画面でも採用
- レスポンシブ対応（スマートフォンでは縦積みレイアウトに変更）

#### 3.3.2 デザイン統一
- メインカラー: #00c79e
- フォント: Noto Sans JP
- 見出し: 各プラットフォーム名 + 手取り額を強調表示
- 画像保存結果と同一の情報表示（販売価格、各手数料の内訳、手取り額）

#### 3.3.3 表示構成
```
[入力フォーム]
販売価格: [入力フィールド] 円 [計算ボタン]

[計算結果表示エリア - 16:9レイアウト]
XX,XXX円（税抜き）で販売した際の手取り額

左側カラム:                    右側カラム:
note: ○○円～○○円              tips: ○円
・プラットフォーム利用料: -○円    ・コンテンツ販売料: -○円
・振込手数料(1回あたり): -270円   ・振込手数料(1回あたり):
                                  ○通常会員: 550円
・クレジットカード決済 -○円: ○円    ○プラス会員: 330円
・携帯キャリア決済 -○円: ○円
・PayPay決済 -○円: ○円         Brain: ○円
・Amazon Pay決済 -○円: ○円      ・コンテンツ販売料: -○円
・noteポイント決済 -○円: ○円     ・振込手数料(1回あたり): -275円
・PayPal決済 -○円: ○円
                              ココナラコンテンツマーケット: ○円
                              ・コンテンツ販売料: -○円
                              ・振込手数料(1回あたり):
                                ○売上金額3,000円未満: 160円
                                ○売上金額3,000円以上: 無料

[画像として保存ボタン]
```

#### 3.3.4 レスポンシブ対応
- **PC・タブレット**: 16:9横長レイアウト（左右2カラム）
- **スマートフォン**: 縦積みレイアウト（note → tips → Brain → ココナラの順）

## 4. 技術仕様

### 4.1 フロントエンド
- HTML5/CSS3/ES6+
- バニラJavaScript（フレームワーク不使用）
- Canvas API（画像生成）

### 4.4 ディレクトリ構造
```
content-sales-calculator/
├── index.html              # メインページ
├── README.md              # プロジェクト説明
├── claude.md              # Claude Code作業履歴
├── src/
│   ├── css/
│   │   ├── style.css           # メインスタイル
│   │   ├── responsive.css      # レスポンシブ対応
│   │   └── components.css      # コンポーネント別スタイル
│   ├── js/
│   │   ├── main.js            # メイン処理・イベント制御
│   │   ├── calculator.js      # 計算ロジック
│   │   ├── imageGenerator.js  # Canvas API画像生成
│   │   └── utils.js           # ユーティリティ関数
│   └── fonts/
│       └── NotoSansJP/        # Webフォントファイル
└── assets/
    └── images/
        └── favicon.ico        # ファビコン
```

### 4.5 ファイル役割定義

#### 4.5.1 HTML
- **index.html**: 単一ページアプリケーションのメインファイル

#### 4.5.2 CSS（分割管理）
- **style.css**: 基本スタイル、カラー定義（#00c79e）、フォント設定（Noto Sans JP）
- **responsive.css**: ブレークポイント設定、スマートフォン対応（16:9→縦積み）
- **components.css**: 各UIコンポーネント（入力フォーム、結果表示エリア、ボタン等）

#### 4.5.3 JavaScript（機能分割）
- **main.js**: DOM操作、イベントリスナー、画面制御、UI更新
- **calculator.js**: 各プラットフォーム（note/tips/Brain/ココナラ）の手数料計算ロジック
- **imageGenerator.js**: Canvas APIを使用した16:9 JPEG画像生成機能
- **utils.js**: 数値フォーマット、入力値バリデーション、共通関数

#### 4.5.4 その他
- **fonts/NotoSansJP/**: Webフォントファイル（WOFF2/WOFF形式）
- **assets/images/**: 画像リソース（ファビコン等）
- **README.md**: セットアップ手順、使用方法、技術仕様
- **claude.md**: Claude Code開発履歴、技術メモ、トラブルシューティング

### 4.6 セキュリティ要件
- 入力値検証（クライアントサイド）
- XSS対策
- 無効な入力値での計算実行防止

## 5. 対象外機能

### 5.1 除外機能
- アフィリエイト機能の計算
- URL共有機能
- 印刷・PDF出力機能
- 計算履歴保存機能
- プレビュー機能

### 5.2 対象外プラットフォーム
- tips/Brainのアフィリエイター収益計算
- noteの定期購読マガジン等（有料記事以外）

## 6. 成果物

### 6.1 開発成果物
- **index.html**: メインページ
- **src/css/**: スタイルシート群（style.css, responsive.css, components.css）
- **src/js/**: JavaScript群（main.js, calculator.js, imageGenerator.js, utils.js）
- **src/fonts/**: Webフォント（Noto Sans JP）
- **assets/**: 画像リソース
- **README.md**: セットアップ手順・使用方法
- **claude.md**: 開発履歴・技術メモ

### 6.2 ドキュメント
- 要件定義書（本書）
- 技術仕様書
- 操作マニュアル

---

**作成日:** 2025年8月7日  
**最終更新:** 2025年8月7日  
**バージョン:** 1.0